var K=Object.defineProperty;var x=(a,e,r)=>e in a?K(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var C=(a,e,r)=>x(a,typeof e!="symbol"?e+"":e,r);import{bT as Y,d as Z,s as I,o as Q,aG as $,aX as X,y as J,V as k,k as j,bm as D,a as ee,bU as b,bV as te,aZ as ae,U as se,T as z,aF as M,r as re,aD as ne,aC as ie,bW as oe,I as ce,aE as ue,ap as G,bX as le,bY as de,ao as he,n as fe}from"./CXt9CpHx.js";const ye={trailing:!0};function _e(a,e=25,r={}){if(r={...ye,...r},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,s,n=[],i,d;const u=(h,o)=>(i=me(a,h,o),i.finally(()=>{if(i=null,r.trailing&&d&&!s){const p=u(h,d);return d=null,p}}),i);return function(...h){return i?(r.trailing&&(d=h),i):new Promise(o=>{const p=!s&&r.leading;clearTimeout(s),s=setTimeout(()=>{s=null;const c=r.leading?t:u(this,h);for(const g of n)g(c);n=[]},e),p?(t=u(this,h),o(t)):n.push(o)})}}async function me(a,e,r){return await a.apply(e,r)}const pe=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ge=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",R=[];class De{constructor(){C(this,"_data",new B);C(this,"_hash",new B([...pe]));C(this,"_nDataBytes",0);C(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const r=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(t+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,r){const t=this._hash.words;let s=t[0],n=t[1],i=t[2],d=t[3],u=t[4],h=t[5],o=t[6],p=t[7];for(let c=0;c<64;c++){if(c<16)R[c]=e[r+c]|0;else{const y=R[c-15],f=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,v=R[c-2],w=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;R[c]=f+R[c-7]+w+R[c-16]}const g=u&h^~u&o,l=s&n^s&i^n&i,_=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),E=p+S+g+ge[c]+R[c],T=_+l;p=o,o=h,h=u,u=d+E|0,d=i,i=n,n=s,s=E+T|0}t[0]=t[0]+s|0,t[1]=t[1]+n|0,t[2]=t[2]+i|0,t[3]=t[3]+d|0,t[4]=t[4]+u|0,t[5]=t[5]+h|0,t[6]=t[6]+o|0,t[7]=t[7]+p|0}_append(e){typeof e=="string"&&(e=B.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let r,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const s=t*16,n=Math.min(s*4,this._data.sigBytes);if(s){for(let i=0;i<s;i+=16)this._doProcessBlock(this._data.words,i);r=this._data.words.splice(0,s),this._data.sigBytes-=n}return new B(r,n)}}class B{constructor(e,r){C(this,"words");C(this,"sigBytes");e=this.words=e||[],this.sigBytes=r===void 0?e.length*4:r}static fromUtf8(e){const r=unescape(encodeURIComponent(e)),t=r.length,s=[];for(let n=0;n<t;n++)s[n>>>2]|=(r.charCodeAt(n)&255)<<24-n%4*8;return new B(s,t)}toBase64(){const e=[];for(let r=0;r<this.sigBytes;r+=3){const t=this.words[r>>>2]>>>24-r%4*8&255,s=this.words[r+1>>>2]>>>24-(r+1)%4*8&255,n=this.words[r+2>>>2]>>>24-(r+2)%4*8&255,i=t<<16|s<<8|n;for(let d=0;d<4&&r*8+d*6<this.sigBytes*8;d++)e.push(we.charAt(i>>>6*(3-d)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let r=0;r<e.sigBytes;r++){const t=e.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=t<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<e.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=e.words[r>>>2];this.sigBytes+=e.sigBytes}}function be(a){return new De().finalize(a).toBase64()}function q(a){return be(Y(a))}const A=Symbol.for("nuxt:client-only"),ze=Z({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(a,{slots:e,attrs:r}){const t=I(!1);Q(()=>{t.value=!0});const s=$();return s&&(s._nuxtClientOnly=!0),k(A,!0),()=>{var u;if(t.value){const h=(u=e.default)==null?void 0:u.call(e);return h&&h.length===1?[X(h[0],r)]:h}const n=e.fallback||e.placeholder;if(n)return n();const i=a.fallback||a.placeholder||"",d=a.fallbackTag||a.placeholderTag||"span";return J(d,r,i)}}}),ve=a=>a==="defer"||a===!1;function Se(...a){var g;const e=typeof a[a.length-1]=="string"?a.pop():void 0;Ee(a[0],a[1])&&a.unshift(e);let[r,t,s={}]=a;const n=j(()=>D(r));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=ee();s.server??(s.server=!0),s.default??(s.default=Ce),s.getCachedData??(s.getCachedData=H),s.lazy??(s.lazy=!1),s.immediate??(s.immediate=!0),s.deep??(s.deep=b.deep),s.dedupe??(s.dedupe="cancel"),s._functionName,i._asyncData[n.value];const d={cause:"initial",dedupe:s.dedupe};(g=i._asyncData[n.value])!=null&&g._init||(d.cachedData=s.getCachedData(n.value,i,{cause:"initial"}),i._asyncData[n.value]=V(i,n.value,t,s,d.cachedData));const u=i._asyncData[n.value];u._deps++;const h=()=>i._asyncData[n.value].execute(d),o=s.server!==!1&&i.payload.serverRendered;{let l=function(y){const f=i._asyncData[y];f!=null&&f._deps&&(f._deps--,f._deps===0&&(f==null||f._off()))};const _=$();if(_&&o&&s.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const y=_._nuxtOnBeforeMountCbs;te(()=>{y.forEach(f=>{f()}),y.splice(0,y.length)}),ae(()=>y.splice(0,y.length))}const S=_&&(_._nuxtClientOnly||se(A,!1));o&&i.isHydrating&&(u.error.value||u.data.value!=null)?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):_&&(!S&&i.payload.serverRendered&&i.isHydrating||s.lazy)&&s.immediate?_._nuxtOnBeforeMountCbs.push(h):s.immediate&&h();const E=ue();if(s.watch){const y=z(s.watch,()=>{u._execute({cause:"watch",dedupe:s.dedupe})},{flush:"post"});E&&M(()=>y())}const T=z(n,(y,f)=>{var O,F;const v=((O=i._asyncData[f])==null?void 0:O.data.value)!==b.value;f&&l(f);const w={cause:"initial",dedupe:s.dedupe};(F=i._asyncData[y])!=null&&F._init||(w.cachedData=s.getCachedData(y,i,{cause:"initial"}),i._asyncData[y]=V(i,y,t,s,w.cachedData)),i._asyncData[y]._deps++,(s.immediate||v)&&i._asyncData[y].execute(w)},{flush:"sync"});E&&M(()=>{T(),l(n.value)})}const p={data:N(()=>{var l;return(l=i._asyncData[n.value])==null?void 0:l.data}),pending:N(()=>{var l;return(l=i._asyncData[n.value])==null?void 0:l.pending}),status:N(()=>{var l;return(l=i._asyncData[n.value])==null?void 0:l.status}),error:N(()=>{var l;return(l=i._asyncData[n.value])==null?void 0:l.error}),refresh:(...l)=>i._asyncData[n.value].execute(...l),execute:(...l)=>i._asyncData[n.value].execute(...l),clear:()=>W(i,n.value)},c=Promise.resolve(i._asyncDataPromises[n.value]).then(()=>p);return Object.assign(c,p),c}function N(a){return j({get(){var e;return(e=a())==null?void 0:e.value},set(e){const r=a();r&&(r.value=e)}})}function Ee(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function W(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=b.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=void 0,a._asyncData[e].error.value=b.errorValue,a._asyncData[e].pending.value=!1,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function Te(a,e){const r={};for(const t of e)r[t]=a[t];return r}function V(a,e,r,t,s){var p;(p=a.payload._errors)[e]??(p[e]=b.errorValue);const n=t.getCachedData!==H,i=r,d=t.deep?re:I,u=s!=null,h=a.hook("app:data:refresh",async c=>{(!c||c.includes(e))&&await o.execute({cause:"refresh:hook"})}),o={data:d(u?s:t.default()),pending:I(!u),error:ne(a.payload._errors,e),status:I("idle"),execute:(c={})=>{if(a._asyncDataPromises[e]){if(ve(c.dedupe??t.dedupe))return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(c.cause==="initial"||a.isHydrating){const l="cachedData"in c?c.cachedData:t.getCachedData(e,a,{cause:c.cause??"refresh:manual"});if(l!=null)return a.payload.data[e]=o.data.value=l,o.error.value=b.errorValue,o.status.value="success",Promise.resolve(l)}o.pending.value=!0,o.status.value="pending";const g=new Promise((l,_)=>{try{l(i(a))}catch(S){_(S)}}).then(async l=>{if(g.cancelled)return a._asyncDataPromises[e];let _=l;t.transform&&(_=await t.transform(l)),t.pick&&(_=Te(_,t.pick)),a.payload.data[e]=_,o.data.value=_,o.error.value=b.errorValue,o.status.value="success"}).catch(l=>{if(g.cancelled)return a._asyncDataPromises[e];o.error.value=oe(l),o.data.value=ce(t.default()),o.status.value="error"}).finally(()=>{g.cancelled||(o.pending.value=!1,delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=g,a._asyncDataPromises[e]},_execute:_e((...c)=>o.execute(...c),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{h(),o._init=!1,n||ie(()=>{o._init||(W(a,e),o.execute=()=>Promise.resolve(),o.data.value=b.value)})}};return o}const Ce=()=>b.value,H=(a,e,r)=>{if(e.isHydrating)return e.payload.data[a];if(r.cause!=="refresh:manual"&&r.cause!=="refresh:hook")return e.static.data[a]};function U(a,e,r){const[t={},s]=typeof e=="string"?[{},e]:[e,r],n=j(()=>D(a)),i=j(()=>D(t.key)||"$f"+q([s,typeof n.value=="string"?n.value:"",...Re(t)]));if(!t.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:u,default:h,transform:o,pick:p,watch:c,immediate:g,getCachedData:l,deep:_,dedupe:S,...E}=t,T=G({...le,...E,cache:typeof t.cache=="boolean"?void 0:t.cache}),y={server:d,lazy:u,default:h,transform:o,pick:p,immediate:g,getCachedData:l,deep:_,dedupe:S,watch:c===!1?[]:[...c||[],T]};if(!g){let w=function(){y.immediate=!0};z(i,w,{flush:"sync",once:!0}),z([...c||[],T],w,{flush:"sync",once:!0})}let f;return Se(c===!1?i.value:i,()=>{var L;(L=f==null?void 0:f.abort)==null||L.call(f,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),f=typeof AbortController<"u"?new AbortController:{};const w=D(t.timeout);let O;return w&&(O=setTimeout(()=>f.abort(new DOMException("Request aborted due to timeout.","AbortError")),w),f.signal.onabort=()=>clearTimeout(O)),(t.$fetch||globalThis.$fetch)(n.value,{signal:f.signal,...T}).finally(()=>{clearTimeout(O)})},y)}function Re(a){var r;const e=[((r=D(a.method))==null?void 0:r.toUpperCase())||"GET",D(a.baseURL)];for(const t of[a.params||a.query]){const s=D(t);if(!s)continue;const n={};for(const[i,d]of Object.entries(s))n[D(i)]=D(d);e.push(n)}if(a.body){const t=D(a.body);if(!t)e.push(q(t));else if(t instanceof ArrayBuffer)e.push(q(Object.fromEntries([...new Uint8Array(t).entries()].map(([s,n])=>[s,n.toString()]))));else if(t instanceof FormData){const s={};for(const n of t.entries()){const[i,d]=n;s[i]=d instanceof File?d.name:d}e.push(q(s))}else if(de(t))e.push(q(G(t)));else try{e.push(q(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}let m={LOGIN:"/login",S3:"/api/presigned_url",PRODUCTS:"/api/products",INVOICES:"/api/invoices",SETTINGS:"/api/settings",USERS:"/api/users",USERS_PERSON:"/api/users/person",USERS_PASSWORD:"/api/users/password"};class P{constructor(){this.handler={onRequest({request:r,options:t}){},onRequestError({request:r,options:t,error:s}){},onResponse({request:r,response:t,options:s}){return t._data},async onResponseError({request:r,response:t,options:s}){return t._data}};const e=he();this.TOKEN=`Bearer ${e.token}`,this.base_url=fe().public.baseURL}get(e,r){return U(e,{baseURL:this.base_url,method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.TOKEN},...r,...this.handler},"$Ku-ZEc9A09")}post(e,r){return U(e,{baseURL:this.base_url,method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.TOKEN},...r,...this.handler},"$UWJb5q0CA5")}patch(e,r){return U(e,{baseURL:this.base_url,method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.TOKEN},...r,...this.handler},"$OLRb5Y0IG9")}put(e,r){return U(e,{baseURL:this.base_url,method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.TOKEN},...r,...this.handler},"$qQ9f5zIm9W")}delete(e,r){return U(e,{baseURL:this.base_url,method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.TOKEN},...r,...this.handler},"$-37MT1oKrm")}}class Oe{constructor(){this.request=new P,this.user=new qe(this.request),this.users=new Ue(this.request),this.products=new Be(this.request),this.invoices=new Pe(this.request),this.setting=new Ne(this.request)}async get_url_upload(e,r,t,s,n){let i={acl:e,content_encoding:r,content_type:t,key:s,platform:n};return this.request.put(m.S3,{body:i})}async upload_s3(e,r,{acl:t,encoding:s,content_type:n,bucket:i}={acl:"public-read",encoding:"base64",content_type:"image/jpeg",bucket:"website"}){var p,c;const{data:d}=await this.get_url_upload(t,s,n,e,i),u=(p=d.value)==null?void 0:p.data.upload_url,h=(c=d.value)==null?void 0:c.data.direct_url;if(!u||!h)throw Error("presigned error");let o;switch(s){case"base64":o=_base64ToArrayBuffer(r.replace(/^data:image\/\w+;base64,/,""));break;case"blob":o=r;break;default:throw new Error("Invalid encoding")}return await U(u,{method:"PUT",headers:{Authorization:"","x-amz-acl":t||"public-read","Content-Encoding":s,"Content-Type":n,"Access-Control-Allow-Origin":"*"},body:o},"$e4YM4ZgHQb"),h}}class qe{constructor(){this.request=new P}async login(e){return await this.request.post(m.LOGIN,e)}async change_pasword(e){return await this.request.put(m.USERS_PASSWORD,e)}}class Ue{constructor(){this.request=new P}async list(e){return await this.request.get(m.USERS,e)}async create(e){return await this.request.post(m.USERS,e)}async update(e){return await this.request.put(m.USERS,e)}async updatePerson(e){return await this.request.put(m.USERS_PERSON,e)}async changePassword(e){return await this.request.put(m.USERS_PASSWORD,e)}async delete(e){return await this.request.delete(m.USERS,e)}}class Be{constructor(){this.request=new P}async list(e){return await this.request.get(m.PRODUCTS,e)}async create(e){return await this.request.post(m.PRODUCTS,e)}async update(e){return await this.request.put(m.PRODUCTS,e)}async delete(e){return await this.request.delete(m.PRODUCTS,e)}}class Pe{constructor(){this.request=new P}async list(e){return await this.request.get(m.INVOICES,e)}async create(e){return await this.request.post(m.INVOICES,e)}async update(e){return await this.request.put(m.INVOICES,e)}async delete(e){return await this.request.delete(m.INVOICES,e)}}class Ne{constructor(){this.request=new P}async get(e){return await this.request.get(m.SETTINGS,e)}async update(e){return await this.request.put(m.SETTINGS,e)}}const Fe=()=>({RestApi:new Oe});export{ze as _,Fe as u};
