import{u as U}from"./BMHoVKzN.js";import{F as w,_ as C}from"./DfpqhckG.js";import{I as k,B as V}from"./BiSs8nCf.js";import{r as p,G as B,y as S,A as r,C as a,D as n,I as s,z as A,E as f,M as y}from"./CXt9CpHx.js";const F={class:"min-h-screen bg-white p-4"},q={class:"bg-white p-6 rounded-lg shadow-sm"},E={class:"flex justify-end gap-2 mt-6"},z={__name:"setting",async setup(I){let m,h;const{RestApi:g}=U(),t=p({id:"",storeName:"",address:"",phone:"",logoUrl:""}),d=p(!1),c=p(!1),_=async()=>{var l;c.value=!0;try{const{data:e}=await g.setting.get();((l=e.value)==null?void 0:l.status)==="success"&&(t.value={id:e.value.data.id,storeName:e.value.data.storeName,address:e.value.data.address,phone:e.value.data.phone,logoUrl:e.value.data.logoUrl})}finally{c.value=!1}},b=async()=>{var l;d.value=!0;try{const{data:e}=await g.setting.update({body:t.value});if(((l=e.value)==null?void 0:l.status)==="success")y.success("Cập nhật cài đặt thành công!");else throw new Error("Cập nhật không thành công")}catch(e){y.error(e.message||"Đã xảy ra lỗi khi cập nhật")}finally{d.value=!1}},x=()=>{_()};return[m,h]=B(()=>_()),await m,h(),(l,e)=>{const u=k,i=C,v=V,N=w;return A(),S("div",F,[e[6]||(e[6]=r("div",{class:"mb-6"},[r("h1",{class:"text-xl font-bold text-gray-800"},"Cài đặt cửa hàng"),r("p",{class:"text-gray-600 text-sm"},"Cập nhật thông tin và logo cửa hàng")],-1)),r("div",q,[a(N,{layout:"vertical",model:s(t),onFinish:b},{default:n(()=>[a(i,{label:"Tên cửa hàng",name:"storeName",rules:[{required:!0,message:"Vui lòng nhập tên cửa hàng"}]},{default:n(()=>[a(u,{value:s(t).storeName,"onUpdate:value":e[0]||(e[0]=o=>s(t).storeName=o),placeholder:"Nhập tên cửa hàng"},null,8,["value"])]),_:1}),a(i,{label:"Địa Chỉ",name:"address",rules:[{required:!0,message:"Vui lòng địa chỉ"}]},{default:n(()=>[a(u,{value:s(t).address,"onUpdate:value":e[1]||(e[1]=o=>s(t).address=o),placeholder:"Nhập địa chỉ"},null,8,["value"])]),_:1}),a(i,{label:"Số điện thoại",name:"phone",rules:[{required:!0,message:"Vui lòng nhập số điện thoại"},{pattern:/(84|0[3|5|7|8|9])+([0-9]{8})\b/,message:"Số điện thoại không hợp lệ"}]},{default:n(()=>[a(u,{value:s(t).phone,"onUpdate:value":e[2]||(e[2]=o=>s(t).phone=o),placeholder:"Nhập số điện thoại"},null,8,["value"])]),_:1}),a(i,{label:"URL logo cửa hàng",name:"logoUrl"},{default:n(()=>[a(u,{value:s(t).logoUrl,"onUpdate:value":e[3]||(e[3]=o=>s(t).logoUrl=o),placeholder:"Nhập URL ảnh logo"},null,8,["value"])]),_:1}),r("div",E,[a(v,{onClick:x},{default:n(()=>e[4]||(e[4]=[f(" Hủy bỏ ")])),_:1,__:[4]}),a(v,{type:"primary","html-type":"submit",loading:s(d)},{default:n(()=>e[5]||(e[5]=[f(" Lưu thay đổi ")])),_:1,__:[5]},8,["loading"])])]),_:1},8,["model"])])])}}};export{z as default};
